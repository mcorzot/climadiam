% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/call_with_retry.R
\name{call_with_retry}
\alias{call_with_retry}
\title{Ejecutar una expresión con reintentos automáticos}
\usage{
call_with_retry(expr, name, retries = 3, wait = 2)
}
\arguments{
\item{expr}{Expresión a evaluar (por ejemplo, una llamada a una función que devuelve XML).}

\item{name}{Character. Nombre descriptivo de la operación (usado en los mensajes de error y advertencia).}

\item{retries}{Integer. Número máximo de intentos (por defecto 3).}

\item{wait}{Numeric. Tiempo de espera entre reintentos en segundos (por defecto 2).}
}
\value{
Devuelve el resultado de la expresión si es exitoso y contiene XML válido.
Si todos los intentos fallan, lanza un error.
}
\description{
Evalúa una expresión (como una llamada a un servicio web) con un número limitado
de reintentos en caso de error, respuesta vacía o XML no válido.
}
\details{
La función comprueba:
1. Que la expresión no produzca un error (`try-error`).
2. Que el resultado no sea `NULL` ni cadena vacía.
3. Que el texto sea un XML bien formado (verificado con `XML::xmlParse`).

Si alguna de estas comprobaciones falla, reintenta hasta `retries` veces.
}
\examples{
\dontrun{
xml_result <- call_with_retry(soap_get(url), "soap_get(getEstaciones)")
}

}
